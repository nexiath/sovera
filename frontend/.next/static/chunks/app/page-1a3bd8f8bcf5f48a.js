(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5462:function(e,t,s){Promise.resolve().then(s.bind(s,9017))},9017:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return E}});var r=s(7437),a=s(1918),n=s(2265),i=s(3023),l=s(9311);let o=n.forwardRef((e,t)=>{let{className:s,type:a,...n}=e;return(0,r.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...n})});o.displayName="Input";var c=s(6743),d=s(6061);let u=(0,d.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),m=n.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(c.f,{ref:t,className:(0,l.cn)(u(),s),...a})});m.displayName=c.f.displayName;var f=s(6110),h=s(164);let x=h.fC,p=n.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(h.aV,{ref:t,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...a})});p.displayName=h.aV.displayName;let g=n.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(h.xz,{ref:t,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...a})});g.displayName=h.xz.displayName;let v=n.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(h.VY,{ref:t,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a})});v.displayName=h.VY.displayName;var y=s(9036),j=s(7332),b=s(3423),w=s(5589),N=s(3715),k=s(1424);function S(){let[e,t]=(0,n.useState)(!1),{login:s,loginWithMagicLink:l,register:c}=(0,a.useAuth)(),[d,u]=(0,n.useState)({email:"",password:""}),[h,S]=(0,n.useState)({email:"",password:"",name:""}),[C,E]=(0,n.useState)(""),q=async e=>{e.preventDefault(),t(!0);try{await s(d.email,d.password),k.Am.success("Connexion r\xe9ussie")}catch(e){k.Am.error(e instanceof Error?e.message:"Une erreur inattendue est survenue")}finally{t(!1)}},T=async e=>{e.preventDefault(),t(!0);try{await c(h.email,h.password,h.name),k.Am.success("Compte cr\xe9\xe9 avec succ\xe8s")}catch(e){k.Am.error(e instanceof Error?e.message:"Une erreur inattendue est survenue")}finally{t(!1)}},A=async e=>{e.preventDefault(),t(!0);try{await l(C),k.Am.success("Lien magique envoy\xe9 \xe0 votre email")}catch(e){k.Am.error(e instanceof Error?e.message:"Une erreur inattendue est survenue")}finally{t(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"w-full max-w-4xl grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(y.Z,{className:"h-8 w-8 text-blue-600"}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Sovera"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-slate-800 dark:text-slate-200",children:"Votre plateforme souveraine"}),(0,r.jsx)("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Alternative fran\xe7aise \xe0 Supabase. Auto-h\xe9bergeable, open source et conforme RGPD."})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(j.Z,{className:"h-5 w-5 text-blue-600"}),(0,r.jsx)("span",{className:"text-slate-700 dark:text-slate-300",children:"Base de donn\xe9es PostgreSQL"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(b.Z,{className:"h-5 w-5 text-green-600"}),(0,r.jsx)("span",{className:"text-slate-700 dark:text-slate-300",children:"Stockage de fichiers MinIO"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(w.Z,{className:"h-5 w-5 text-orange-600"}),(0,r.jsx)("span",{className:"text-slate-700 dark:text-slate-300",children:"Authentification JWT s\xe9curis\xe9e"})]})]}),(0,r.jsx)("div",{className:"bg-blue-50 dark:bg-slate-800 p-4 rounded-lg",children:(0,r.jsxs)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[(0,r.jsx)("strong",{children:"Stockage local uniquement"})," - Aucune donn\xe9e n'est envoy\xe9e vers des serveurs tiers. Vos donn\xe9es restent sous votre contr\xf4le."]})})]}),(0,r.jsxs)(f.Zb,{className:"w-full max-w-md mx-auto",children:[(0,r.jsxs)(f.Ol,{children:[(0,r.jsx)(f.ll,{children:"Connexion"}),(0,r.jsx)(f.SZ,{children:"Acc\xe9dez \xe0 votre tableau de bord Sovera"})]}),(0,r.jsx)(f.aY,{children:(0,r.jsxs)(x,{defaultValue:"login",className:"w-full",children:[(0,r.jsxs)(p,{className:"grid w-full grid-cols-3",children:[(0,r.jsx)(g,{value:"login",children:"Connexion"}),(0,r.jsx)(g,{value:"register",children:"Inscription"}),(0,r.jsx)(g,{value:"magic",children:"Magic Link"})]}),(0,r.jsx)(v,{value:"login",className:"space-y-4",children:(0,r.jsxs)("form",{onSubmit:q,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(m,{htmlFor:"email",children:"Email"}),(0,r.jsx)(o,{id:"email",type:"email",placeholder:"votre@email.com",value:d.email,onChange:e=>u({...d,email:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(m,{htmlFor:"password",children:"Mot de passe"}),(0,r.jsx)(o,{id:"password",type:"password",placeholder:"Votre mot de passe",value:d.password,onChange:e=>u({...d,password:e.target.value}),required:!0})]}),(0,r.jsx)(i.z,{type:"submit",className:"w-full",disabled:e,children:e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Connexion..."]}):"Se connecter"})]})}),(0,r.jsx)(v,{value:"register",className:"space-y-4",children:(0,r.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(m,{htmlFor:"name",children:"Nom"}),(0,r.jsx)(o,{id:"name",type:"text",placeholder:"Votre nom",value:h.name,onChange:e=>S({...h,name:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(m,{htmlFor:"reg-email",children:"Email"}),(0,r.jsx)(o,{id:"reg-email",type:"email",placeholder:"votre@email.com",value:h.email,onChange:e=>S({...h,email:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(m,{htmlFor:"reg-password",children:"Mot de passe"}),(0,r.jsx)(o,{id:"reg-password",type:"password",value:h.password,onChange:e=>S({...h,password:e.target.value}),required:!0})]}),(0,r.jsx)(i.z,{type:"submit",className:"w-full",disabled:e,children:e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Cr\xe9ation..."]}):"Cr\xe9er un compte"})]})}),(0,r.jsx)(v,{value:"magic",className:"space-y-4",children:(0,r.jsxs)("form",{onSubmit:A,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(m,{htmlFor:"magic-email",children:"Email"}),(0,r.jsx)(o,{id:"magic-email",type:"email",placeholder:"votre@email.com",value:C,onChange:e=>E(e.target.value),required:!0})]}),(0,r.jsx)(i.z,{type:"submit",className:"w-full",disabled:e,children:e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi..."]}):"Envoyer le lien magique"})]})})]})})]})]})})}var C=s(4033);function E(){let{user:e}=(0,a.useAuth)(),t=(0,C.useRouter)();return e?(t.push("/dashboard"),null):(0,r.jsx)(S,{})}},3023:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var r=s(7437),a=s(2265),n=s(7256),i=s(6061),l=s(9311);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(o({variant:a,size:i,className:s})),ref:t,...d})});c.displayName="Button"},6110:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return o}});var r=s(7437),a=s(2265),n=s(9311);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});o.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});d.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})});u.displayName="CardFooter"},1918:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return l},useAuth:function(){return o}});var r=s(7437),a=s(2265);let n=new class{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(this.baseUrl).concat(e),r=new Headers(t.headers);r.has("Content-Type")||t.body instanceof FormData||r.set("Content-Type","application/json"),this.token&&r.set("Authorization","Bearer ".concat(this.token));try{let e=await fetch(s,{...t,headers:r});if(!e.ok){let t=await e.json().catch(()=>({})),s="HTTP error! status: ".concat(e.status);throw t.detail&&(Array.isArray(t.detail)?s=t.detail.map(e=>e.msg||e.detail).join(", "):"string"==typeof t.detail&&(s=t.detail)),Error(s)}let a=await e.json();return{success:!0,data:a}}catch(e){return console.error("API Error:",e),{success:!1,error:e instanceof Error?e.message:"An error occurred"}}}setToken(e){this.token=e,e?localStorage.setItem("sovera-token",e):localStorage.removeItem("sovera-token")}async login(e,t){let s=new URLSearchParams;return s.append("username",e),s.append("password",t),this.request("/auth/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s})}async register(e,t){return this.request("/auth/register",{method:"POST",body:JSON.stringify({email:e,password:t})})}async getCurrentUser(){return this.request("/auth/me")}async getProjects(){return this.request("/projects/")}async createProject(e,t){return this.request("/projects/",{method:"POST",body:JSON.stringify({name:e,description:t})})}async getProject(e){return this.request("/projects/".concat(e))}async updateProject(e,t){return this.request("/projects/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteProject(e){return this.request("/projects/".concat(e),{method:"DELETE"})}async getItems(e,t){let s=new URLSearchParams;return s.append("project_id",e.toString()),t&&Object.entries(t).forEach(e=>{let[t,r]=e;void 0!==r&&s.append(t,r.toString())}),this.request("/items/?".concat(s.toString()))}async createItem(e,t,s){return this.request("/items/?project_id=".concat(e),{method:"POST",body:JSON.stringify({label:t,content:s}),headers:{"Content-Type":"application/json"}})}async updateItem(e,t,s,r){let a={};return void 0!==s&&(a.label=s),void 0!==r&&(a.content=r),this.request("/items/".concat(t,"?project_id=").concat(e),{method:"PUT",body:JSON.stringify(a)})}async deleteItem(e,t){return this.request("/items/".concat(t,"?project_id=").concat(e),{method:"DELETE"})}async uploadFile(e){let t=new FormData;return t.append("file",e),this.request("/files/upload/",{method:"POST",headers:{},body:t})}async getFiles(){return this.request("/files/files/")}async getFileUrl(e){return this.request("/files/file/".concat(e))}async deleteFile(e){return this.request("/files/file/".concat(e),{method:"DELETE"})}async getSystemInfo(){return this.request("/system/info")}async pingHosts(){return this.request("/system/ping")}async getSystemLogs(){return this.request("/system/logs")}async createBackup(){return this.request("/system/backup",{method:"POST"})}constructor(e){this.token=null,this.baseUrl=e,this.token=localStorage.getItem("sovera-token")}}("http://localhost:8000"),i=(0,a.createContext)(void 0);function l(e){let{children:t}=e,[s,l]=(0,a.useState)(null),[o,c]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=async()=>{{let e=localStorage.getItem("sovera-token");if(e){n.setToken(e);let t=await n.getCurrentUser();t.success&&t.data?l(t.data):(localStorage.removeItem("sovera-token"),n.setToken(null))}}c(!1)};e()},[]);let d=async(e,t)=>{let s=await n.login(e,t);if(s.success&&s.data){let{access_token:e}=s.data;n.setToken(e);let t=await n.getCurrentUser();if(t.success&&t.data)l(t.data);else throw Error("Impossible de r\xe9cup\xe9rer les informations utilisateur")}else{let e="Erreur de connexion. Veuillez v\xe9rifier vos identifiants.";throw s.error&&(e=s.error),Error(e)}},u=async e=>{throw Error("Magic link non impl\xe9ment\xe9")},m=async(e,t,s)=>{let r=await n.register(e,t);if(r.success&&r.data);else{let e="Erreur lors de l'inscription. Veuillez r\xe9essayer.";throw r.error&&(e=r.error),Error(e)}};return(0,r.jsx)(i.Provider,{value:{user:s,login:d,loginWithMagicLink:u,register:m,logout:()=>{l(null),n.setToken(null)},loading:o},children:t})}function o(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9311:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(7042),a=s(4769);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}}},function(e){e.O(0,[60,424,856,974,971,864,744],function(){return e(e.s=5462)}),_N_E=e.O()}]);