(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{1032:function(e,s,t){Promise.resolve().then(t.bind(t,6199))},6199:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return k}});var l=t(7437),a=t(2265),r=t(4033),i=t(4156),n=t(6110),c=t(9155),d=t(998),o=t(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,o.Z)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);function m(e){let{stats:s,projects:t}=e;return(0,l.jsxs)("div",{className:"p-6 space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold",children:"Tableau de bord"}),(0,l.jsx)("p",{className:"text-muted-foreground mt-1",children:"Vue d'overview de votre instance Sovera"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(d.Z,{className:"h-5 w-5 text-green-500"}),(0,l.jsx)("span",{className:"text-sm font-medium",children:"Syst\xe8me op\xe9rationnel"})]})]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map(e=>{let s=e.icon;return(0,l.jsxs)(n.Zb,{children:[(0,l.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(n.ll,{className:"text-sm font-medium",children:e.title}),(0,l.jsx)(s,{className:"h-4 w-4 ".concat(e.color)})]}),(0,l.jsxs)(n.aY,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:e.value}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.change})]})]},e.title)})}),(0,l.jsxs)(n.Zb,{children:[(0,l.jsx)(n.Ol,{children:(0,l.jsx)(n.ll,{children:"Projets r\xe9cents"})}),(0,l.jsx)(n.aY,{children:(0,l.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)(x,{className:"h-8 w-8 text-blue-600"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-medium",children:e.name}),(0,l.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[(0,l.jsxs)("span",{children:[e.tables," tables"]}),(0,l.jsxs)("span",{children:[e.users," utilisateurs"]}),(0,l.jsx)("span",{children:e.storage})]})]})]}),(0,l.jsx)(c.C,{variant:"Actif"===e.status?"default":"secondary",children:e.status})]},e.name))})})]})]})}var h=t(3023),j=t(6775);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,o.Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),p=(0,o.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),f=(0,o.Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),g=(0,o.Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var N=t(9883),v=t(7332),y=t(6637),b=t(5750);function w(e){let{projects:s,loading:t}=e,a=(0,r.useRouter)(),i=e=>{switch(e){case"completed":return(0,l.jsx)(u,{className:"h-5 w-5 text-green-500"});case"pending":return(0,l.jsx)(p,{className:"h-5 w-5 text-yellow-500"});case"failed":return(0,l.jsx)(f,{className:"h-5 w-5 text-red-500"});default:return(0,l.jsx)(g,{className:"h-5 w-5 text-gray-500"})}},d=e=>{switch(e){case"completed":return(0,l.jsx)(c.C,{className:"bg-green-100 text-green-800",children:"Ready"});case"pending":return(0,l.jsx)(c.C,{variant:"secondary",children:"Provisioning"});case"failed":return(0,l.jsx)(c.C,{variant:"destructive",children:"Failed"});default:return(0,l.jsx)(c.C,{variant:"outline",children:"Unknown"})}},o={total:s.length,ready:s.filter(e=>"completed"===e.provisioning_status).length,pending:s.filter(e=>"pending"===e.provisioning_status).length,failed:s.filter(e=>"failed"===e.provisioning_status).length};return t?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Dashboard"})}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>(0,l.jsxs)(n.Zb,{children:[(0,l.jsx)(n.Ol,{className:"pb-2",children:(0,l.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})}),(0,l.jsx)(n.aY,{children:(0,l.jsx)("div",{className:"h-8 bg-gray-200 rounded animate-pulse"})})]},e))})]}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Dashboard"}),(0,l.jsxs)(h.z,{onClick:()=>a.push("/dashboard/projects/new"),children:[(0,l.jsx)(N.Z,{className:"h-4 w-4 mr-2"}),"New Project"]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,l.jsxs)(n.Zb,{children:[(0,l.jsx)(n.Ol,{className:"pb-2",children:(0,l.jsx)(n.ll,{className:"text-sm font-medium",children:"Total Projects"})}),(0,l.jsxs)(n.aY,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:o.total}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"All your projects"})]})]}),(0,l.jsxs)(n.Zb,{children:[(0,l.jsx)(n.Ol,{className:"pb-2",children:(0,l.jsx)(n.ll,{className:"text-sm font-medium",children:"Ready"})}),(0,l.jsxs)(n.aY,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-green-600",children:o.ready}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Fully provisioned"})]})]}),(0,l.jsxs)(n.Zb,{children:[(0,l.jsx)(n.Ol,{className:"pb-2",children:(0,l.jsx)(n.ll,{className:"text-sm font-medium",children:"Provisioning"})}),(0,l.jsxs)(n.aY,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:o.pending}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Being set up"})]})]}),(0,l.jsxs)(n.Zb,{children:[(0,l.jsx)(n.Ol,{className:"pb-2",children:(0,l.jsx)(n.ll,{className:"text-sm font-medium",children:"Failed"})}),(0,l.jsxs)(n.aY,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-red-600",children:o.failed}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Need attention"})]})]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold",children:"Your Projects"}),0===s.length?(0,l.jsx)(n.Zb,{children:(0,l.jsxs)(n.aY,{className:"flex flex-col items-center justify-center py-16",children:[(0,l.jsx)(v.Z,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No projects yet"}),(0,l.jsx)("p",{className:"text-gray-500 text-center mb-4",children:"Get started by creating your first project. You'll get a dedicated database and storage."}),(0,l.jsxs)(h.z,{onClick:()=>a.push("/dashboard/projects/new"),children:[(0,l.jsx)(N.Z,{className:"h-4 w-4 mr-2"}),"Create Project"]})]})}):(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>(0,l.jsxs)(n.Zb,{className:"hover:shadow-md transition-shadow",children:[(0,l.jsxs)(n.Ol,{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(n.ll,{className:"text-lg",children:e.name}),i(e.provisioning_status)]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(n.SZ,{className:"flex-1",children:e.description||"No description"}),d(e.provisioning_status)]})]}),(0,l.jsx)(n.aY,{children:(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-500",children:"Created"}),(0,l.jsx)("p",{className:"font-medium",children:new Date(e.created_at).toLocaleDateString()})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-500",children:"Storage"}),(0,l.jsxs)("p",{className:"font-medium",children:[e.storage_limit_mb," MB"]})]})]}),(0,l.jsx)(j.Z,{}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsxs)(h.z,{variant:"outline",size:"sm",onClick:()=>a.push("/dashboard/projects/".concat(e.id,"/tables")),disabled:"completed"!==e.provisioning_status,children:[(0,l.jsx)(v.Z,{className:"h-4 w-4 mr-1"}),"Tables"]}),(0,l.jsxs)(h.z,{variant:"outline",size:"sm",onClick:()=>a.push("/dashboard/projects/".concat(e.id,"/files")),disabled:"completed"!==e.provisioning_status,children:[(0,l.jsx)(y.Z,{className:"h-4 w-4 mr-1"}),"Files"]})]}),(0,l.jsxs)(h.z,{variant:"outline",size:"sm",onClick:()=>a.push("/dashboard/projects/".concat(e.id,"/members")),disabled:"completed"!==e.provisioning_status,children:[(0,l.jsx)(b.Z,{className:"h-4 w-4 mr-1"}),"Members"]})]})]})})]},e.id))})]})]})}function k(){(0,r.useRouter)();let{projects:e,loadProjects:s,loading:t,error:n}=(0,i.c8)(),{addToast:c}=(0,i.Es)();(0,a.useEffect)(()=>{s()},[s]),(0,a.useEffect)(()=>{n&&c({title:"Error",description:n,type:"error"})},[n,c]);let d=[{title:"Total Projects",value:e.length.toString(),change:"All your projects",icon:x,color:"text-blue-600"},{title:"Ready",value:e.filter(e=>"completed"===e.provisioning_status).length.toString(),change:"Fully provisioned",icon:u,color:"text-green-600"},{title:"Provisioning",value:e.filter(e=>"pending"===e.provisioning_status).length.toString(),change:"Being set up",icon:p,color:"text-yellow-600"},{title:"Failed",value:e.filter(e=>"failed"===e.provisioning_status).length.toString(),change:"Need attention",icon:f,color:"text-red-600"}],o=e.map(e=>({name:e.name,status:"completed"===e.provisioning_status?"Actif":"En d\xe9veloppement",tables:0,users:0,storage:"".concat(e.storage_limit_mb," MB")}));return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)(m,{stats:d,projects:o}),(0,l.jsx)(w,{projects:e,loading:t})]})}},6110:function(e,s,t){"use strict";t.d(s,{Ol:function(){return n},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},ll:function(){return c}});var l=t(7437),a=t(2265),r=t(9311);let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});i.displayName="Card";let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",t),...a})});n.displayName="CardHeader";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("h3",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",t),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",t),...a})});o.displayName="CardContent";let x=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",t),...a})});x.displayName="CardFooter"}},function(e){e.O(0,[60,819,544,971,864,744],function(){return e(e.s=1032)}),_N_E=e.O()}]);