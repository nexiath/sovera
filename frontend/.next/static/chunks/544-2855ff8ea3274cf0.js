"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[544],{9155:function(e,t,r){r.d(t,{C:function(){return s}});var a=r(7437);r(2265);var o=r(6061),n=r(9311);let c=(0,o.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function s(e){let{className:t,variant:r,...o}=e;return(0,a.jsx)("div",{className:(0,n.cn)(c({variant:r}),t),...o})}},3023:function(e,t,r){r.d(t,{z:function(){return l}});var a=r(7437),o=r(2265),n=r(7256),c=r(6061),s=r(9311);let i=(0,c.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=o.forwardRef((e,t)=>{let{className:r,variant:o,size:c,asChild:l=!1,...d}=e,u=l?n.g7:"button";return(0,a.jsx)(u,{className:(0,s.cn)(i({variant:o,size:c,className:r})),ref:t,...d})});l.displayName="Button"},6775:function(e,t,r){r.d(t,{Z:function(){return s}});var a=r(7437),o=r(2265),n=r(6823),c=r(9311);let s=o.forwardRef((e,t)=>{let{className:r,orientation:o="horizontal",decorative:s=!0,...i}=e;return(0,a.jsx)(n.f,{ref:t,decorative:s,orientation:o,className:(0,c.cn)("shrink-0 bg-border","horizontal"===o?"h-[1px] w-full":"h-full w-[1px]",r),...i})});s.displayName=n.f.displayName},4156:function(e,t,r){r.d(t,{tN:function(){return s},c8:function(){return i},Es:function(){return l}});var a=r(4660),o=r(4810);let n=new class{setAuthToken(e){this.authToken=e}clearAuthToken(){this.authToken=void 0}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseUrl).concat(e),a={"Content-Type":"application/json",...t.headers};this.authToken&&(a.Authorization="Bearer ".concat(this.authToken));let o={...t,headers:a};try{let e=await fetch(r,o);if(!e.ok){let t=await e.json().catch(()=>({detail:"Unknown error"})),r={detail:t.detail||"HTTP ".concat(e.status,": ").concat(e.statusText),status_code:e.status};throw r}let t=e.headers.get("content-type");if(t&&t.includes("application/json"))return e.json();return e.text()}catch(e){if(e instanceof Error&&"status_code"in e)throw e;throw{detail:e instanceof Error?e.message:"Network error",status_code:0}}}async login(e){let t=new FormData;return t.append("username",e.username),t.append("password",e.password),this.request("/auth/login",{method:"POST",body:t,headers:{}})}async register(e){return this.request("/auth/register",{method:"POST",body:JSON.stringify(e)})}async getCurrentUser(){return this.request("/auth/me")}async getProjects(){return this.request("/projects/")}async getProject(e){return this.request("/projects/".concat(e))}async createProject(e){return this.request("/projects/",{method:"POST",body:JSON.stringify(e)})}async updateProject(e,t){return this.request("/projects/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteProject(e){return this.request("/projects/".concat(e),{method:"DELETE"})}async getProjectMembers(e){return this.request("/projects/".concat(e,"/members"))}async inviteUserToProject(e,t){return this.request("/projects/".concat(e,"/members/invite"),{method:"POST",body:JSON.stringify({...t,project_id:e})})}async updateProjectMember(e,t,r){return this.request("/projects/".concat(e,"/members/").concat(t),{method:"PATCH",body:JSON.stringify(r)})}async removeProjectMember(e,t){return this.request("/projects/".concat(e,"/members/").concat(t),{method:"DELETE"})}async getUserInvitations(){return this.request("/invitations")}async acceptInvitation(e){return this.request("/invitations/".concat(e,"/accept"),{method:"POST"})}async rejectInvitation(e){return this.request("/invitations/".concat(e,"/reject"),{method:"POST"})}async getUserMembership(e){return this.request("/projects/".concat(e,"/members/me"))}async getTables(e){return this.request("/projects/".concat(e,"/tables/"))}async createTable(e,t){return this.request("/projects/".concat(e,"/tables/"),{method:"POST",body:JSON.stringify(t)})}async getTableSchema(e,t){return this.request("/projects/".concat(e,"/tables/").concat(t,"/schema"))}async dropTable(e,t){return this.request("/projects/".concat(e,"/tables/").concat(t),{method:"DELETE"})}async getTableRows(e,t,r){let a=new URLSearchParams;(null==r?void 0:r.limit)&&a.append("limit",r.limit.toString()),(null==r?void 0:r.offset)&&a.append("offset",r.offset.toString());let o=a.toString(),n="/projects/".concat(e,"/tables/").concat(t,"/rows").concat(o?"?".concat(o):"");return this.request(n)}async insertTableRow(e,t,r){return this.request("/projects/".concat(e,"/tables/").concat(t,"/rows"),{method:"POST",body:JSON.stringify(r)})}async updateTableRow(e,t,r,a){return this.request("/projects/".concat(e,"/tables/").concat(t,"/rows/").concat(r),{method:"PUT",body:JSON.stringify(a)})}async deleteTableRow(e,t,r){return this.request("/projects/".concat(e,"/tables/").concat(t,"/rows/").concat(r),{method:"DELETE"})}async getFiles(e){return this.request("/projects/".concat(e,"/files/"))}async uploadFile(e,t,r){let a=new FormData;return a.append("file",t),r&&a.append("path",r),this.request("/projects/".concat(e,"/files/upload"),{method:"POST",body:a,headers:{}})}async deleteFile(e,t){return this.request("/projects/".concat(e,"/files/").concat(t),{method:"DELETE"})}async getFileDownloadUrl(e,t){return"".concat(this.baseUrl,"/projects/").concat(e,"/files/").concat(t)}async getDashboardStats(){return this.request("/dashboard/stats")}async getRecentActivity(){return this.request("/dashboard/activity")}createWebSocketConnection(e,t){let r=this.baseUrl.replace("http","ws"),a=new WebSocket("".concat(r,"/ws/projects/").concat(e,"/tables/").concat(t));return a}constructor(e="http://localhost:8000"){this.baseUrl=e}};function c(e){switch(e.status_code){case 401:return"Authentication required. Please log in.";case 403:return"Access denied. You do not have permission to perform this action.";case 404:return"Resource not found.";case 409:return"Conflict. The resource already exists.";case 422:return"Validation error. Please check your input.";case 500:return"Server error. Please try again later.";default:return e.detail||"An unexpected error occurred."}}let s=(0,a.Ue)()((0,o.tJ)((e,t)=>({user:null,isAuthenticated:!1,loading:!1,error:null,login:async(t,r)=>{e({loading:!0,error:null});try{let a=await n.login({username:t,password:r});n.setAuthToken(a.access_token);let o=await n.getCurrentUser();e({user:o,isAuthenticated:!0,loading:!1}),document.cookie="auth_token=".concat(a.access_token,"; path=/; max-age=86400; secure; samesite=strict")}catch(t){throw e({error:c(t),loading:!1}),t}},register:async(r,a)=>{e({loading:!0,error:null});try{let o=await n.register({email:r,password:a});e({user:o,loading:!1}),await t().login(r,a)}catch(t){throw e({error:c(t),loading:!1}),t}},logout:()=>{n.clearAuthToken(),document.cookie="auth_token=; path=/; max-age=0",e({user:null,isAuthenticated:!1,error:null})},checkAuth:async()=>{{let r=document.cookie.split(";"),a=r.find(e=>e.trim().startsWith("auth_token="));if(a){let r=a.split("=")[1];n.setAuthToken(r);try{let t=await n.getCurrentUser();e({user:t,isAuthenticated:!0})}catch(e){t().logout()}}}},clearError:()=>e({error:null})}),{name:"auth-storage",storage:(0,o.FL)(()=>localStorage),partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated})})),i=(0,a.Ue)((e,t)=>({current_project:void 0,projects:[],members:[],membership:void 0,loading:!1,error:void 0,loadProjects:async()=>{e({loading:!0,error:void 0});try{let t=await n.getProjects();e({projects:t,loading:!1})}catch(t){e({error:c(t),loading:!1})}},loadProject:async t=>{e({loading:!0,error:void 0});try{let r=await n.getProject(t);e({current_project:r,loading:!1})}catch(t){e({error:c(t),loading:!1})}},createProject:async t=>{e({loading:!0,error:void 0});try{let r=await n.createProject(t);return e(e=>({projects:[...e.projects,r],loading:!1})),r}catch(t){throw e({error:c(t),loading:!1}),t}},updateProject:async(t,r)=>{e({loading:!0,error:void 0});try{let a=await n.updateProject(t,r);e(e=>{var r;return{projects:e.projects.map(e=>e.id===t?a:e),current_project:(null===(r=e.current_project)||void 0===r?void 0:r.id)===t?a:e.current_project,loading:!1}})}catch(t){throw e({error:c(t),loading:!1}),t}},deleteProject:async t=>{e({loading:!0,error:void 0});try{await n.deleteProject(t),e(e=>{var r;return{projects:e.projects.filter(e=>e.id!==t),current_project:(null===(r=e.current_project)||void 0===r?void 0:r.id)===t?void 0:e.current_project,loading:!1}})}catch(t){throw e({error:c(t),loading:!1}),t}},loadMembers:async t=>{e({loading:!0,error:void 0});try{let r=await n.getProjectMembers(t);e({members:r,loading:!1})}catch(t){e({error:c(t),loading:!1})}},inviteMember:async(t,r)=>{e({loading:!0,error:void 0});try{let a=await n.inviteUserToProject(t,r);e(e=>({members:[...e.members,a],loading:!1}))}catch(t){throw e({error:c(t),loading:!1}),t}},removeMember:async(t,r)=>{e({loading:!0,error:void 0});try{await n.removeProjectMember(t,r),e(e=>({members:e.members.filter(e=>e.id!==r),loading:!1}))}catch(t){throw e({error:c(t),loading:!1}),t}},loadUserMembership:async t=>{try{let r=await n.getUserMembership(t);e({membership:r})}catch(t){e({error:c(t)})}},setCurrentProject:t=>{e({current_project:t})},clearError:()=>e({error:void 0})}));(0,a.Ue)((e,t)=>({tables:[],currentTable:{data:[],columns:[],loading:!1,pagination:{page:1,per_page:10,total:0,total_pages:0}},loading:!1,error:void 0,loadTables:async t=>{e({loading:!0,error:void 0});try{let r=await n.getTables(t);e({tables:r,loading:!1})}catch(t){e({error:c(t),loading:!1})}},createTable:async(r,a)=>{e({loading:!0,error:void 0});try{await n.createTable(r,a),await t().loadTables(r),e({loading:!1})}catch(t){throw e({error:c(t),loading:!1}),t}},dropTable:async(r,a)=>{e({loading:!0,error:void 0});try{await n.dropTable(r,a),await t().loadTables(r),e({loading:!1})}catch(t){throw e({error:c(t),loading:!1}),t}},loadTableData:async(t,r,a)=>{e(e=>({currentTable:{...e.currentTable,loading:!0,error:void 0}}));try{let[o,c]=await Promise.all([n.getTableRows(t,r,a),n.getTableSchema(t,r)]);e(e=>({currentTable:{...e.currentTable,data:o,columns:c.columns||[],loading:!1,pagination:{...e.currentTable.pagination,page:Math.floor(((null==a?void 0:a.offset)||0)/((null==a?void 0:a.limit)||10))+1,per_page:(null==a?void 0:a.limit)||10}}}))}catch(t){e(e=>({currentTable:{...e.currentTable,loading:!1,error:c(t)}}))}},insertRow:async(t,r,a)=>{try{let o=await n.insertTableRow(t,r,a);e(e=>({currentTable:{...e.currentTable,data:[...e.currentTable.data,o.data]}}))}catch(t){throw e(e=>({currentTable:{...e.currentTable,error:c(t)}})),t}},updateRow:async(t,r,a,o)=>{try{let c=await n.updateTableRow(t,r,a,o);e(e=>({currentTable:{...e.currentTable,data:e.currentTable.data.map(e=>e.id===a?c:e)}}))}catch(t){throw e(e=>({currentTable:{...e.currentTable,error:c(t)}})),t}},deleteRow:async(t,r,a)=>{try{await n.deleteTableRow(t,r,a),e(e=>({currentTable:{...e.currentTable,data:e.currentTable.data.filter(e=>e.id!==a)}}))}catch(t){throw e(e=>({currentTable:{...e.currentTable,error:c(t)}})),t}},clearError:()=>e(e=>({error:void 0,currentTable:{...e.currentTable,error:void 0}}))})),(0,a.Ue)((e,t)=>({files:[],loading:!1,error:void 0,loadFiles:async t=>{e({loading:!0,error:void 0});try{let r=await n.getFiles(t);e({files:r,loading:!1})}catch(t){e({error:c(t),loading:!1})}},uploadFile:async(t,r,a)=>{e({loading:!0,error:void 0});try{let o=await n.uploadFile(t,r,a);e(e=>({files:[...e.files,o],loading:!1}))}catch(t){throw e({error:c(t),loading:!1}),t}},deleteFile:async(t,r)=>{e({loading:!0,error:void 0});try{await n.deleteFile(t,r),e(e=>({files:e.files.filter(e=>e.filename!==r),loading:!1}))}catch(t){throw e({error:c(t),loading:!1}),t}},clearError:()=>e({error:void 0})}));let l=(0,a.Ue)(e=>({toasts:[],addToast:t=>{let r=Math.random().toString(36).substr(2,9),a={...t,id:r};e(e=>({toasts:[...e.toasts,a]})),setTimeout(()=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==r)}))},t.duration||5e3)},removeToast:t=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==t)}))},clearToasts:()=>e({toasts:[]})}))},9311:function(e,t,r){r.d(t,{cn:function(){return n}});var a=r(7042),o=r(4769);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.m6)((0,a.W)(t))}}}]);